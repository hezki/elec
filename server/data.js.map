{"version":3,"sources":["z:\\node.js\\node-bootstrap\\test2\\app\\server\\data.js"],"names":["err","e","req","console","log","util","inspect","Error","only","att","r","i","length","wait","require","extend","_extend","mysql","mssql","http","yes","fs","private_log_pool","existsSync","x","readFileSync","toString","createPool","JSON","parse","blue","bold","module","exports","conn","route","path","logSql","pool_id","q","appendFileSync","Date","format","connect","dbinfo","conn_a_id","type","sqlconn","Connection","server","db","database","pool","Request","ms_con","pools","conn_a","port","user","pass","password","_db","host","timezone","dateStrings","insecureAuth","multipleStatements","on","my_con","_dbinfo","get_pool_id","id","indexOf","mssql_format","prms","replace","a","v","push","join","vsprintf","sid","ip","tbl","row","old","val","n","stringify","query","er","stack","rst","retId","log_err","qp","proc","cb","sqlserver","_pool","res","c","getConnection","con","release","arguments","fa","undefined","async","no_log","substr","pre_proc","message","get_flds","byname","f","name","flags","t","upd","Array","prototype","slice","call","IncomingMessage","splice","upd_internal","apply","data","onlyFlds","idFld","retQ","require_flds","logObj","glob","C","headers","tmp","get_login","uid","split","trim","d","Object","keys","flds","test","dt2str","f1","f2","f3","ret","forEach","is_meta","msrst","myrst"],"mappings":"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","file":"data.js.map"}