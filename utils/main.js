function datestamp(){var o=new Date;return o.toJSON().replace("T"," ").replace("Z","")}function log(o,e){e?fs.appendFileSync(path.resolve(__dirname,"../../log/app.log"),"\n\n"+datestamp()+"	"+o+"\n\n"):fs.appendFileSync(path.resolve(__dirname,"../../log/app.log"),o)}process.on("uncaughtException",function(o){log("APP_ERR",1),log(o,1),log(o.stack,1)}),process.on("SIGHUP",function(){child&&child.stop(),setTimeout(function(){process.exit()},500)}),process.on("SIGINT",function(){child&&child.stop(),setTimeout(function(){process.exit()},500)});var forever=require("forever-monitor"),path=require("path"),stripAnsi=require("strip-ansi"),fs=require("fs"),opt={cwd:path.resolve(__dirname,"../../"),outFile:path.resolve(__dirname,"../../log/out.log")},child=new forever.Monitor(path.resolve(__dirname,"../server/app.js"),opt);child.on("exit",function(o){log("EXIT",1)}).on("start",function(){log("START",1)}).on("error",function(o){log("ERROR",1),log(o&&o.message?o.message:o,1),o.stack&&log(o.stack,1)}).on("restart",function(o){log("RESTART",1)}).on("stop",function(o){log("STOP",1)}).on("stdout",function(o){log(stripAnsi(o))}).on("stderr",function(o){log(stripAnsi(o))}).start();
//# sourceMappingURL=main.js.map