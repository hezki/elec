function datestamp(){var e=new Date;return e.toJSON().replace("T"," ").replace("Z","")}function log(e,n){console.log(e),n?fs.appendFileSync(path.resolve(__dirname,"../../log/svc.log"),datestamp()+"	"+e+"\n"):fs.appendFileSync(path.resolve(__dirname,"../../log/svc.log"),e)}function init(){svc=new Service({name:"ElectricTimerWeb",description:"Electric Timer Web Server",script:__dirname+"/main.js"}),svc.directory(path.resolve(__dirname,"../temp")),svc.on("install",function(){log("service install",1),svc.start()}).on("alreadyinstalled",function(){log("alreadyinstalled",1),svc.start()}).on("invalidinstallation",function(){log("invalidinstallation",1)}).on("uninstall",function(){log("uninstall",1)}).on("start",function(){log("start",1)}).on("stop",function(){log("stop",1)}).on("error",function(e){log("ERROR",1),log(e&&e.message?e.message:e,1),e&&e.stack&&log(e.stack)})}var Service=require("node-windows").Service,path=require("path"),fs=require("fs");process.on("uncaughtException",function(e){log("APP_ERR",1),log(e,1),log(e.stack,1),process.exit(0)});var svc=null;switch(process.argv[2]){case"I":case"i":init(),svc.install();break;case"U":case"u":init(),svc.uninstall();break;case"S":case"s":init(),svc.start();break;case"T":case"t":init(),svc.stop();break;default:console.log("USAGE: node service.js <OPT>\n\nI to install\nU to uninstall\nS to strart\nT to stop")}
//# sourceMappingURL=service.js.map